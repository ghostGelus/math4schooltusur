(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03c04938"],{"225f":function(t,o,n){"use strict";var e=n("63a4"),s=n.n(e);s.a},"280d":function(t,o,n){},3746:function(t,o,n){"use strict";n.r(o);var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"route_container"},[n("confirm-modal",{attrs:{color:"red",text:"Да, удалить"},on:{confirm:t.deleteAccount},model:{value:t.showConfirmModal,callback:function(o){t.showConfirmModal=o},expression:"showConfirmModal"}},[t._v(" Вы действительно хотите удалить аккаунт? ")]),n("div",{staticClass:"h1"},[t._v("Настройки пользователя")]),n("div",[n("div",{staticClass:"h3"},[t._v("Поменяйте свой пароль")]),n("p",{staticClass:"p--condensed"},[t._v(" Для безопасности введите текущий пароль ")]),n("div",[n("fancy-input",{attrs:{placeholder:"Текущий пароль",error:t.password.errors["current password"],type:"password"},model:{value:t.password.current,callback:function(o){t.$set(t.password,"current",o)},expression:"password.current"}})],1),n("div",[n("fancy-input",{attrs:{placeholder:"Новый пароль",error:t.password.errors["new password"],type:"password"},model:{value:t.password.new,callback:function(o){t.$set(t.password,"new",o)},expression:"password.new"}})],1),n("loading-button",{staticClass:"button button--green",attrs:{loading:t.password.loading},on:{click:t.savePassword}},[t._v("Изменить пароль")])],1)],1)},s=[],a=n("80e3"),r=n("8e8d"),i=n("da16"),c=n("c4b0"),u=n.n(c),l=n("bd28"),d=n("2fa3"),p={name:"settingsAccount",components:{FancyInput:a["a"],LoadingButton:r["a"],ConfirmModal:i["a"]},data:function(){return{password:{loading:!1,current:"",new:"",errors:{"new password":"","current password":""}},deleteAccountLoading:!1,showConfirmModal:!1}},computed:{},methods:{savePassword:function(){var t=this;this.password.errors["current password"]="",this.password.errors["new password"]="",this.password.current.length?this.password["new"].length?(this.password.loading=!0,this.axios.put(d["a"]+"/api/v1/user/"+this.$store.state.username,{currentPassword:this.password.current,newPassword:this.password["new"]}).then((function(){t.password.loading=!1,t.password.current="",t.password["new"]=""}))["catch"]((function(o){t.password.loading=!1,console.log(o),u()(t.$store)(o,(function(o){"hash"===o.path&&(t.password.errors["new password"]=o.message)}))}))):this.password.errors["new password"]="Заполните поле":this.password.errors["current password"]="Заполните поле"},deleteAccount:function(){var t=this;this.deleteAccountLoading=!0,this.axios.put(d["a"]+"/api/v1/user/"+this.$store.state.username).then((function(){t.deleteAccountLoading=!1,t.$store.commit("setUsername",null),t.$router.push("/")}))["catch"]((function(o){t.deleteAccountLoading=!1,u()(t.$store)(o)}))}},mounted:function(){this.$store.dispatch("setTitle","account settings"),Object(l["a"])("settingsAccount")}},f=p,h=(n("c20e"),n("2877")),w=Object(h["a"])(f,e,s,!1,null,"6611a1b0",null);o["default"]=w.exports},4795:function(t,o,n){var e=n("23e7"),s=n("da84"),a=n("342f"),r=[].slice,i=/MSIE .\./.test(a),c=function(t){return function(o,n){var e=arguments.length>2,s=e?r.call(arguments,2):void 0;return t(e?function(){("function"==typeof o?o:Function(o)).apply(this,s)}:o,n)}};e({global:!0,bind:!0,forced:i},{setTimeout:c(s.setTimeout),setInterval:c(s.setInterval)})},"4e07":function(t,o,n){},"63a4":function(t,o,n){},"80e3":function(t,o,n){"use strict";var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"fancy_input",style:{width:t.width||"auto"}},[n("div",{staticStyle:{position:"relative",display:"inline-block"}},[n("div",{staticClass:"fancy_input__placeholder",class:{"fancy_input__placeholder--active":t.active||t.value.length,"fancy_input__placeholder--large":t.large}},[t._v(" "+t._s(t.placeholder)+" ")]),n("input",{staticClass:"fancy_input__input input",class:{"fancy_input__input--large":t.large,"fancy_input__input--error":t.error},attrs:{type:t.type||"text"},domProps:{value:t.value},on:{input:function(o){return t.updateValue(o.target.value)},focus:t.addActive,blur:t.removeActive}})]),n("error-tooltip",{attrs:{error:t.error}})],1)},s=[],a=n("e145"),r={name:"FancyInput",props:["value","placeholder","width","type","error","large"],components:{ErrorTooltip:a["a"]},data:function(){return{active:!1}},methods:{updateValue:function(t){this.$emit("input",t)},addActive:function(){this.active=!0},removeActive:function(){this.active=!1}}},i=r,c=(n("9946"),n("2877")),u=Object(c["a"])(i,e,s,!1,null,"e8a0c810",null);o["a"]=u.exports},"8df7":function(t,o,n){"use strict";var e=n("4e07"),s=n.n(e);s.a},"8e8d":function(t,o,n){"use strict";var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("button",{staticClass:"button loading_button",class:{"loading_button--loading":t.loading},on:{click:function(o){return t.event("click")},keydown:function(o){return t.event("keydown")}}},[n("loading-icon",{staticClass:"loading_button__icon",attrs:{dark:t.dark}}),n("div",{staticClass:"loading_button__slot"},[t._t("default")],2)],1)},s=[],a=n("c5af"),r={name:"LoadingButton",props:["loading","dark"],components:{LoadingIcon:a["a"]},methods:{event:function(t){this.loading||this.$emit(t)}}},i=r,c=(n("8df7"),n("2877")),u=Object(c["a"])(i,e,s,!1,null,null,null);o["a"]=u.exports},9946:function(t,o,n){"use strict";var e=n("bcc7"),s=n.n(e);s.a},bcc7:function(t,o,n){},bd28:function(t,o,n){"use strict";var e=n("bc3a"),s=n.n(e),a=n("2fa3");o["a"]=function(t,o){"userPosts"===t||"userThreads"===t?s.a.get(a["a"]+"/api/v1/user/"+o).then((function(o){return s.a.post(a["a"]+"/api/v1/log",{route:t,resourceId:o.data.id})}))["catch"](console.log):s.a.post(a["a"]+"/api/v1/log",{route:t,resourceId:o})["catch"](console.log)}},c20e:function(t,o,n){"use strict";var e=n("280d"),s=n.n(e);s.a},da16:function(t,o,n){"use strict";var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("modal-window",{attrs:{value:t.showModal},on:{input:t.setShowModal}},[n("div",{staticStyle:{"padding-top":"1rem"},attrs:{slot:"main"},slot:"main"},[t._t("default")],2),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"button button--modal",class:t.buttonColor,on:{click:t.confirm}},[t._v(t._s(t.text||"OK"))]),n("button",{staticClass:"button button--modal",on:{click:function(o){return t.setShowModal(!1)}}},[t._v("Отмена")])])])},s=[],a=n("6307"),r={name:"ConfirmModal",props:["value","color","text"],components:{ModalWindow:a["a"]},data:function(){return{showModal:!1}},computed:{buttonColor:function(){return this.color?"button--"+this.color:""}},watch:{value:function(t){this.showModal=t}},methods:{setShowModal:function(t){this.showModal=t,this.$emit("input",t)},confirm:function(){this.$emit("confirm"),this.setShowModal(!1)}},mounted:function(){this.setShowModal(this.value)}},i=r,c=n("2877"),u=Object(c["a"])(i,e,s,!1,null,null,null);o["a"]=u.exports},e145:function(t,o,n){"use strict";var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"error_tooltip",class:{"error_tooltip--show":t.error}},[t._v(" "+t._s(t.delayed_error)+" ")])},s=[],a=(n("4795"),{name:"ErrorTooltip",props:["error"],data:function(){return{delayed_error:this.error}},watch:{error:function(t){var o=this;t?this.delayed_error=t:setTimeout((function(){o.delayed_error=""}),205)}}}),r=a,i=(n("225f"),n("2877")),c=Object(i["a"])(r,e,s,!1,null,"6281f96c",null);o["a"]=c.exports}}]);
//# sourceMappingURL=chunk-03c04938.08c81a2b.js.map