(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04c69c95"],{2828:function(t,e,a){"use strict";var s=a("6218"),r=a.n(s);r.a},"3af9":function(t,e,a){},"3dc9":function(t,e,a){},"44ea":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info_tooltip",on:{mouseenter:function(e){return t.setState(!0)},mouseleave:function(e){return t.setState(!1)}}},[a("div",{staticClass:"info_tooltip__content",class:{"info_tooltip__content--show":t.show,"info_tooltip__content--pointer_events":t.pointerEvents}},[t._t("content")],2),a("div",{staticClass:"info_tooltip__display",class:{"info_tooltip__display--hover":t.show}},[t._t("display")],2)])},r=[],n=(a("4795"),{name:"InfoTooltip",props:["noEvents"],data:function(){return{show:!1,pointerEvents:!1}},methods:{setState:function(t){var e=this;this.noEvents||(t?(this.pointerEvents=!0,this.show=!0,this.$emit("hover")):(this.show=!1,setTimeout((function(){e.show||(e.pointerEvents=!1)}),300)))}}}),i=n,o=(a("b067"),a("2877")),l=Object(o["a"])(i,s,r,!1,null,null,null);e["a"]=l.exports},4795:function(t,e,a){var s=a("23e7"),r=a("da84"),n=a("342f"),i=[].slice,o=/MSIE .\./.test(n),l=function(t){return function(e,a){var s=arguments.length>2,r=s?i.call(arguments,2):void 0;return t(s?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,a)}};s({global:!0,bind:!0,forced:o},{setTimeout:l(r.setTimeout),setInterval:l(r.setInterval)})},"52ca":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user_threads"},[a("div",{staticClass:"user_threads__title"},[t._v("Посты пользователя "+t._s(t.username))]),t.threads?t.threads.length?a("scroll-load",{attrs:{loading:t.loadingThreads,showNext:null!==t.nextURL,message:"threads"},on:{loadNext:t.loadNewThreads}},[t._l(t.threads,(function(t){return a("thread-display",{key:"thread-display-"+t.id,attrs:{thread:t}})})),t.loadingThreads?t._l(t.nextThreadsCount,(function(t){return a("thread-display-placeholder",{key:t})})):t._e()],2):[t._v("Нет публикаций")]:t._l(10,(function(t){return a("thread-display-placeholder",{key:"thread-display-placeholder-"+t})}))],2)},r=[],n=(a("7db0"),a("b0c0"),a("2909")),i=a("8674"),o=a("ce34"),l=a("9870"),c=a("c4b0"),d=a.n(c),u=a("bd28"),h=a("2fa3"),_={name:"userThreads",props:["username"],components:{ThreadDisplay:o["a"],ThreadDisplayPlaceholder:l["a"],ScrollLoad:i["a"]},data:function(){return{threads:null,loadingThreads:!1,nextURL:"",nextThreadsCount:0}},methods:{loadNewThreads:function(){var t=this;null!==this.nextURL&&(this.loadingThreads=!0,this.axios.get(this.nextURL).then((function(e){var a;t.loadingThreads=!1,t.threads||(t.threads=[]),(a=t.threads).push.apply(a,Object(n["a"])(e.data.Threads)),t.nextURL=e.data.meta.nextURL,t.nextThreadsCount=e.data.meta.nextThreadsCount}))["catch"]((function(e){t.loadingThreads=!1,d()(t.$store)(e)})))}},created:function(){var t=this;this.axios.get(h["a"]+"/api/v1/user/".concat(this.$route.params.username,"?threads=true")).then((function(e){t.threads=e.data.Threads,t.nextURL=e.data.meta.nextURL,t.nextThreadsCount=e.data.meta.nextThreadsCount}))["catch"]((function(e){var a=e.response.data.errors.find((function(t){return"accountDoesNotExist"===t.name}));a?t.$store.commit("set404Page",!0):d()(t.$store)(e)})),Object(u["a"])("userThreads",this.$route.params.username)}},p=_,f=(a("2828"),a("2877")),v=Object(f["a"])(p,s,r,!1,null,"1a733710",null);e["default"]=v.exports},6218:function(t,e,a){},"6fbc":function(t,e,a){"use strict";var s=a("e438"),r=a.n(s);r.a},"84a2":function(t,e,a){(function(e){var a="Expected a function",s=NaN,r="[object Symbol]",n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,d="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,h=d||u||Function("return this")(),_=Object.prototype,p=_.toString,f=Math.max,v=Math.min,m=function(){return h.Date.now()};function y(t,e,s){var r,n,i,o,l,c,d=0,u=!1,h=!1,_=!0;if("function"!=typeof t)throw new TypeError(a);function p(e){var a=r,s=n;return r=n=void 0,d=e,o=t.apply(s,a),o}function y(t){return d=t,l=setTimeout(x,e),u?p(t):o}function g(t){var a=t-c,s=t-d,r=e-a;return h?v(r,i-s):r}function T(t){var a=t-c,s=t-d;return void 0===c||a>=e||a<0||h&&s>=i}function x(){var t=m();if(T(t))return U(t);l=setTimeout(x,g(t))}function U(t){return l=void 0,_&&r?p(t):(r=n=void 0,o)}function w(){void 0!==l&&clearTimeout(l),d=0,r=c=n=l=void 0}function $(){return void 0===l?o:U(m())}function E(){var t=m(),a=T(t);if(r=arguments,n=this,c=t,a){if(void 0===l)return y(c);if(h)return l=setTimeout(x,e),p(c)}return void 0===l&&(l=setTimeout(x,e)),o}return e=C(e)||0,b(s)&&(u=!!s.leading,h="maxWait"in s,i=h?f(C(s.maxWait)||0,e):i,_="trailing"in s?!!s.trailing:_),E.cancel=w,E.flush=$,E}function g(t,e,s){var r=!0,n=!0;if("function"!=typeof t)throw new TypeError(a);return b(s)&&(r="leading"in s?!!s.leading:r,n="trailing"in s?!!s.trailing:n),y(t,e,{leading:r,maxWait:e,trailing:n})}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function T(t){return!!t&&"object"==typeof t}function x(t){return"symbol"==typeof t||T(t)&&p.call(t)==r}function C(t){if("number"==typeof t)return t;if(x(t))return s;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var a=o.test(t);return a||l.test(t)?c(t.slice(2),a?2:8):i.test(t)?s:+t}t.exports=g}).call(this,a("c8ba"))},8674:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scroll_load"},[t._t("default")],2)},r=[],n=a("84a2"),i=a.n(n),o={name:"ScrollLoad",props:["loading","query-selector","padding-bottom","padding-top"],computed:{element:function(){return this.querySelector?document.querySelector(this.querySelector):null}},methods:{onScroll:i()((function(){var t,e,a=this.paddingBottom||300,s=this.paddingTop||150;this.loading||(this.element?(t=Math.floor(this.element.scrollTop+this.element.getBoundingClientRect().height+a-this.element.scrollHeight),e=s-this.element.scrollTop):(t=window.innerHeight+window.pageYOffset+a-document.body.scrollHeight,e=s-document.body.scrollTop),t>0?this.$emit("loadNext"):e>0&&this.$emit("loadPrevious"))}))},mounted:function(){(this.element||window).addEventListener("scroll",this.onScroll)},destroyed:function(){(this.element||window).removeEventListener("scroll",this.onScroll)}},l=o,c=a("2877"),d=Object(c["a"])(l,s,r,!1,null,null,null);e["a"]=d.exports},9098:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("info-tooltip",{staticClass:"avatar_icon",attrs:{noEvents:null===t.user}},[a("template",{slot:"content"},[t.userData?[a("div",{staticClass:"avatar_icon__header"},[a("div",{staticClass:"avatar_icon__icon avatar_icon__icon--small picture_circle",style:{"background-color":t.proxyUser.color,"background-image":t.pictureURL},on:{click:t.goToUser}},[t._v(" "+t._s(t.letter)+" ")]),a("div",{staticClass:"avatar_icon__header_info"},[a("span",{staticClass:"avatar_icon__username",on:{click:function(e){return e.stopPropagation(),t.goToUser(e)}}},[t._v(" "+t._s(t.proxyUser.username)+" "),t.proxyUser.admin?a("span",{staticClass:"admin_badge"},[t._v("администратор")]):t._e()])])])]:[t._v("Загрузка...")]],2),a("div",{staticClass:"avatar_icon__icon picture_circle",class:{"avatar_icon__icon--small":"small"===t.size,"avatar_icon__icon--tiny":"tiny"===t.size},style:{"background-color":t.proxyUser.color,"background-image":t.pictureURL},attrs:{slot:"display"},on:{click:function(e){return e.stopPropagation(),t.goToUser(e)}},slot:"display"},[t._v(" "+t._s(t.letter)+" ")])],2)},r=[],n=a("44ea"),i=a("c4b0"),o=a.n(i),l=a("2fa3"),c={name:"AvatarIcon",props:["user","size"],components:{InfoTooltip:n["a"]},data:function(){return{userData:null}},computed:{proxyUser:function(){return this.userData?this.userData:this.user?this.user:{}},letter:function(){return this.proxyUser.username&&!this.proxyUser.picture?this.proxyUser.username[0].toUpperCase():""},pictureURL:function(){return this.proxyUser.picture?"url("+this.proxyUser.picture+")":null}},methods:{loadUser:function(){var t=this;this.userData||null===this.user||this.axios.get(l["a"]+"/api/v1/user/"+this.proxyUser.username).then((function(e){t.userData=e.data}))["catch"](o()(this.$store))},goToUser:function(){null!==this.user&&this.$router.push("/user/"+this.user.username)}},mounted:function(){this.loadUser()}},d=c,u=(a("d465"),a("2877")),h=Object(u["a"])(d,s,r,!1,null,null,null);e["a"]=h.exports},9870:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"thread_display_placeholder"},[a("div",{staticClass:"thread_display_placeholder__icon"}),a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"thread_display_placeholder__header"},[a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--15"}),a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--33"})]),a("div",{staticClass:"thread_display_placeholder__replies_bar"},[a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--20"}),a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--5"})]),a("div",{staticClass:"thread_display_placeholder__content"},[a("div",{staticClass:"thread_display_placeholder__bar"}),a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--58"})])])])}],n={name:"ThreadDisplayPlaceholder"},i=n,o=(a("ad2c"),a("2877")),l=Object(o["a"])(i,s,r,!1,null,"3ef4b836",null);e["a"]=l.exports},ad2c:function(t,e,a){"use strict";var s=a("b162"),r=a.n(s);r.a},b067:function(t,e,a){"use strict";var s=a("3af9"),r=a.n(s);r.a},b162:function(t,e,a){},bd28:function(t,e,a){"use strict";var s=a("bc3a"),r=a.n(s),n=a("2fa3");e["a"]=function(t,e){"userPosts"===t||"userThreads"===t?r.a.get(n["a"]+"/api/v1/user/"+e).then((function(e){return r.a.post(n["a"]+"/api/v1/log",{route:t,resourceId:e.data.id})}))["catch"](console.log):r.a.post(n["a"]+"/api/v1/log",{route:t,resourceId:e})["catch"](console.log)}},ce34:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"thread_display"},[a("avatar-icon",{ref:"avatar",staticClass:"thread_display__icon",attrs:{user:t.thread.User,size:"small"},on:{click:t.goToUser}}),a("div",{staticStyle:{width:"calc(100% - 3rem)"},on:{click:t.goToThread}},[a("div",{staticClass:"thread_display__header"},[a("span",{staticClass:"thread_display__name"},[t._v(" "+t._s(t.thread.name)+" ")]),a("div",{staticClass:"thread_display__meta_bar"},[a("div",[t._v(" В категории "),a("span",{ref:"category",staticClass:"thread_display__category"},[t._v(t._s(t.thread.Category.name))])])])]),a("div",{staticClass:"thread_display__replies_bar"},[2===t.thread.Posts.length?a("div",{staticClass:"thread_display__latest_reply"}):a("span",{staticStyle:{cursor:"default"}}),a("div",{staticClass:"thread_display__replies",attrs:{title:"Replies to thread"}},[a("font-awesome-icon",{attrs:{icon:["far","comment"],"fixed-width":""}}),t._v(" "+t._s(t.thread.postsCount-1)+" ")],1)]),a("div",{staticClass:"thread_display__content"},[t._v(" "+t._s(t._f("truncate")(t._f("stripTags")(t.thread.Posts[0].content),150))+" ")])])],1)},r=[],n=a("9098"),i={name:"ThreadDisplay",props:["thread"],components:{AvatarIcon:n["a"]},computed:{threadUsername:function(){return this.thread.User?this.thread.User.username:"[deleted]"},replyUsername:function(){return this.thread.Posts[1].User?this.thread.Posts[1].User.username:"[deleted]"}},methods:{goToUser:function(){this.$router.push("/user/"+this.thread.User.username)},goToThread:function(){this.$router.push("/thread/"+this.thread.slug+"/"+this.thread.id)}}},o=i,l=(a("6fbc"),a("2877")),c=Object(l["a"])(o,s,r,!1,null,"4ff9b3b8",null);e["a"]=c.exports},d465:function(t,e,a){"use strict";var s=a("3dc9"),r=a.n(s);r.a},e438:function(t,e,a){}}]);
//# sourceMappingURL=chunk-04c69c95.f4f53a39.js.map